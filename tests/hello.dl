struct Vec2 {
    int x;
    int y;
};

struct Color {
    int r;
    int g;
    int b;
};

struct Sprite {
    Vec2 pos;
    Color tint;
    int id;
};

public Sprite sprites[4];
private Color palette[8];
public auto score;
private int debugFlag;
public Vec2 checkpoints[2];
private int hiddenValues[5];

void resetSprites() {
    for (int i = 0; i < 4; i = i + 1) {
        sprites[i].pos.x = 0;
        sprites[i].pos.y = 0;
        sprites[i].tint.r = 255;
        sprites[i].tint.g = 255;
        sprites[i].tint.b = 255;
        sprites[i].id = i;
    }
}

void updateScore(int delta) {
    // Test cast: forcibly cast score to int before assignment
    score = cast(int)(score + delta);
    debugFlag = score * 2;
    hiddenValues[0] = cast(int)score;
}

void main() {
    resetSprites();
    updateScore(10);
    palette[0].r = cast(int)128.0;
}
